<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Collaborative Canvas</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <div class="brand">üñåÔ∏è Collaborative Canvas</div>
    <div class="controls">
      <label>
        Tool:
        <select id="tool">
          <option value="brush">Brush</option>
          <option value="eraser">Eraser</option>
        </select>
      </label>
      <span class="sep"></span>
      <label>
        Color:
        <input type="color" id="color" value="#000000">
      </label>
      <span class="sep"></span>
      <label>
        Width: <input type="range" id="width" min="1" max="50" value="3" style="width:80px">
        <span id="widthVal">3</span>px
      </label>
      <span class="sep"></span>
      <button id="undo" title="Ctrl+Z">‚Ü∂ Undo</button>
      <button id="redo" title="Ctrl+Shift+Z">‚Ü∑ Redo</button>
    </div>
  </header>

  <main>
    <aside>
      <h3>Users</h3>
      <ul id="users"></ul>
      
      <div class="hints" style="margin-top: 24px; font-size: 12px; color: #666;">
        <h4>Shortcuts:</h4>
        <ul>
          <li><code>Ctrl+Z</code> - Undo</li>
          <li><code>Ctrl+Shift+Z</code> - Redo</li>
          <li><code>B</code> - Brush</li>
          <li><code>E</code> - Eraser</li>
        </ul>
      </div>
    </aside>

    <div class="stage">
      <div id="canvasWrap">
        <canvas id="canvas"></canvas>
        <canvas id="live"></canvas>
        <div id="cursors"></div>
      </div>
    </div>
  </main>

  <footer>
    <span>
      <span id="status">Connecting...</span> 
      | <span id="rev">rev 0</span>
    </span>
    <span id="roomInfo">Room: ‚Äî | User: ‚Äî</span>
  </footer>

  <!-- Room Modal Dialog -->
  <div id="roomModal" class="modal">
    <div class="modal-content">
      <h2>Join or Create</h2>
      <p class="modal-subtitle">Start by joining an existing room or create a new one</p>

      <div class="modal-tabs">
        <button class="tab-btn active" data-tab="create">Create Room</button>
        <button class="tab-btn" data-tab="join">Join Room</button>
      </div>

      <div id="createTab" class="tab-content active">
        <label>
          Room ID:
          <input type="text" id="createRoomId" placeholder="e.g., my-room" maxlength="50">
        </label>
        <label>
          Password (optional):
          <input type="password" id="createPassword" placeholder="Leave blank for public room">
        </label>
        <label>
          Your Name:
          <input type="text" id="createUsername" placeholder="e.g., Alice" maxlength="30">
        </label>
        <button id="createRoomBtn" class="btn-primary">Create Room</button>
      </div>

      <div id="joinTab" class="tab-content">
        <label>
          Room ID:
          <input type="text" id="joinRoomId" placeholder="e.g., my-room" maxlength="50">
        </label>
        <label>
          Password (if required):
          <input type="password" id="joinPassword" placeholder="Leave blank if no password">
        </label>
        <label>
          Your Name:
          <input type="text" id="joinUsername" placeholder="e.g., Bob" maxlength="30">
        </label>
        <button id="joinRoomBtn" class="btn-primary">Join Room</button>

        <div class="public-rooms">
          <h4>Public Rooms</h4>
          <ul id="roomsList">
            <li>No public rooms available yet</li>
          </ul>
        </div>
      </div>

      <div id="modalError" class="modal-error"></div>
    </div>
  </div>

  <!-- Socket.io client library -->
  <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>

  <!-- App scripts in order -->
  <script src="websocket.js"></script>
  <script src="room-dialog.js"></script>
  <script src="canvas.js"></script>
  <script src="main.js"></script>
</body>
</html>
